---
title: 数据库相关
date: 2018-06-08 09:39:40
tags: [GitHub, Mysql, Java]
---


数据库的设计总体上分为6个阶段：
<!--more-->
<h2>1、 需求分析阶段</h2>
    准确了解用户的需求，撰写需求说明
<h2>2、概念设计阶段</h2>
    它是整个数据库设计的关键，通过对用户需求进行综合，归纳与抽象，形成一个独立于具体DBMS的概念模型。E-R图的设计在此阶段。
<h2>3、逻辑结构设计阶段</h2>
   将概念结果转换为某个DBMS所支持的数据模型。也就是指E-R图和关系模型的转换，具体为将实体，实体的属性和实体之间的联系转换为关系模式。
<h2>4、数据库物理设计阶段</h2>
   为逻辑结果选取一个最适合应用环境的物理结构，包括存储结构和存取方法。
<h2>5、数据库实施阶段</h2>
  此阶段利用SQL语句实现逻辑结构设计和物理设计阶段的内容，包括建立数据库，编制与调试应用程序等。
<h2>6、数据库运行和维护阶段</h2>
  运行过程中不断的调整，修改和优化数据库系统。

---

<h2>聚集索引</h2>
　　一种索引，该索引中键值的逻辑顺序决定了表中相应行的物理顺序。 
　　聚集索引确定表中数据的物理顺序。聚集索引类似于电话簿，后者按姓氏排列数据。由于聚集索引规定数据在表中的物理存储顺序，因此一个表只能包含一个聚集索引。但该索引可以包含多个列（组合索引），就像电话簿按姓氏和名字进行组织一样。　　 
　　聚集索引对于那些经常要搜索范围值的列特别有效。使用聚集索引找到包含第一个值的行后，便可以确保包含后续索引值的行在物理相邻。聚簇索引的顺序就是数据的物理存储的顺序，叶子节点就是数据节点。物理排序只有一种，所以聚簇索引只有一种,当索引值唯一时，使用聚集索引查找特定的行也很有效率。

<h2>非聚集索引</h2>
　　一种索引，该索引中索引的逻辑顺序与磁盘上行的物理存储顺序不同。

    索引是通过二叉树的数据结构来描述的，我们可以这么理解聚簇索引：索引的叶节点就是数据节点。而非聚簇索引的叶节点仍然是索引节点，只不过有一个指针指向对应的数据块

<h3>下面的表总结了何时使用聚集索引或非聚集索引（很重要）：</h3>


| 动作描述	   |      使用聚集索引	| 使用非聚集索引 | 
| --------   | -----:  | :----:  |
| 列经常被分组排序 |  	应 |  	应 |  
| 返回某范围内的数据	|  应	|  不应|  
|  一个或极少不同值 |  	不应	|   不应 |  
|  小数目的不同值 |  	应 |  	不应 |  
|  大数目的不同值 |  	不应 |  	应 |  |  
|  频繁更新的列	|  不应|  	应|  
|  外键列	 |  应	|  应|  
|  主键列	|  应|  	应|  
|  频繁修改索引列	|  不应	|  应|  

---

对数据库的操作都是在事务中进行的。 
<h2>事务</h2>
事务是指一组相互依赖的操作行为。事务中的操作是不可分割的工作单元，由一组在业务逻辑上相互依赖的SQL语句组成，有ACID特征。 

Atomic（原子性）：事务中包含的操作被看做一个逻辑单元，这个逻辑单元中的操作要么全部成功，要么全部失败。 

Consistency（一致性）：只有合法的数据可以被写入数据库，否则事务应该将其回滚到最初状态。

Isolation（隔离性）：事务允许多个用户对同一个数据进行并发访问，而不破坏数据的正确性和完整性。同时，并行事务的修改必须与其他并行事务的修改相互独立。 

Durability（持久性）：事务结束后，事务处理的结果必须能够得到固化。 

数据库中有多个事务同时存在，就是事务并发，此时就不能保证事务隔离性，SQL-92定义了事务隔离级别，描述了给定事务的行为对其它并发执行事务的暴露程度，或者说是一个事务必须与其它事务进行隔离的程度。隔离级别由低到高为： 

Read Uncommitted，Read Committed，Repeatable Read， Serializable 
隔离级别越高，越能保证数据的完整性和一致性，但对并发性能的影响也越大